<!-- RSVP Section -->
<section id="rsvp" class="bg-light-gray">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2 class="section-heading">RSVP</h2>
                <h3 class="section-subheading text-muted">Пожалуйста, подтвердите свое присутствие до 30 мая 2025 года.</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-10 col-lg-offset-1">
                <form id="rsvpForm" class="ajaxForm" action="https://formcarry.com/s/R38lqicl6qE" method="POST">
                    <!-- Anti-spam honeypot fields -->
                    <input type="text" name="_gotcha" style="display: none">
                    
                    <!-- Family Information -->
                    <div class="row">
                        <div class="col-md-12">
                            <h4>Контактная информация</h4>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Фамилия семьи" name="familyName" required>
                            </div>
                            <div class="form-group">
                                <input type="email" class="form-control" placeholder="Email (для подтверждения)" name="email">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Attendees Section -->
                    <div class="row">
                        <div class="col-md-12">
                            <h4>ГОСТИ</h4>
                            <p class="text-muted">Укажите информацию о каждом присутствующем госте.</p>
                        </div>
                    </div>
                    
                    <!-- Container for all attendees -->
                    <div id="attendeesContainer">
                        <!-- First Attendee Form (Default) -->
                        <div class="attendee-form" data-index="0">
                            <h5 class="attendee-title">ГОСТЬ #1</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control" placeholder="Имя" name="attendees[0][firstName]" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control" placeholder="Фамилия" name="attendees[0][lastName]" required>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <select class="form-control" name="attendees[0][menu]" required>
                                            <option value="" disabled selected>Выбор меню</option>
                                            <option value="fish">Рыбное меню (стандарт)</option>
                                            <option value="meat">Мясное меню</option>
                                            <option value="kids">Детское меню</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <select class="form-control isChild-select" name="attendees[0][isChild]" id="isChild_0" data-index="0">
                                            <option value="no" selected>Взрослый</option>
                                            <option value="yes">Ребенок (до 12 лет)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Пищевые ограничения:</label>
                                        <div class="checkbox-group">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" name="attendees[0][intolerances][]" value="lactose"> Лактоза
                                            </label>
                                            <label class="checkbox-inline">
                                                <input type="checkbox" name="attendees[0][intolerances][]" value="gluten"> Целиакия/Глютен
                                            </label>
                                            <label class="checkbox-inline">
                                                <input type="checkbox" name="attendees[0][intolerances][]" value="favism"> Фавизм
                                            </label>
                                            <label class="checkbox-inline">
                                                <input type="checkbox" name="attendees[0][intolerances][]" value="nuts"> Орехи
                                            </label>
                                            <label class="checkbox-inline">
                                                <input type="checkbox" name="attendees[0][intolerances][]" value="nickel"> Никель
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="child-age-options" id="childAgeOptions_0" style="display: none;">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label>Возраст ребенка:</label>
                                            <select class="form-control childAge-select" name="attendees[0][childAge]" id="childAge_0" data-index="0">
                                                <option value="" disabled selected>Выберите возраст</option>
                                                <option value="under1">Младше 1 года</option>
                                                <option value="1">1 год</option>
                                                <option value="2">2 года</option>
                                                <option value="3">3 года</option>
                                                <option value="4">4 года</option>
                                                <option value="5">5 лет</option>
                                                <option value="6">6 лет</option>
                                                <option value="7">7 лет</option>
                                                <option value="8">8 лет</option>
                                                <option value="9">9 лет</option>
                                                <option value="10">10 лет</option>
                                                <option value="11">11 лет</option>
                                                <option value="12">12 лет</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="highchair-options" id="highchairOptions_0" style="display: none;">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <select class="form-control" name="attendees[0][highchair]">
                                                <option value="no" selected>Детский стульчик не нужен</option>
                                                <option value="yes">Нужен детский стульчик</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                        </div>
                    </div>
                    
                    <!-- Buttons to add/remove attendees -->
                    <div class="row">
                        <div class="col-md-12 text-center">
                            <button type="button" id="addAttendeeBtn" class="btn btn-default add-attendee-btn">
                                <i class="fa fa-plus"></i> Добавить еще гостя
                            </button>
                            <button type="button" id="removeAttendeeBtn" class="btn btn-default" style="display: none;">
                                <i class="fa fa-minus"></i> Удалить последнего гостя
                            </button>
                        </div>
                    </div>
                    
                    <!-- Notes -->
                    <div class="row" style="margin-top: 20px;">
                        <div class="col-md-12">
                            <div class="form-group">
                                <textarea class="form-control" placeholder="Дополнительные примечания или особые запросы" name="additionalNotes"></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- reCAPTCHA -->
                    <div class="row">
                        <div class="col-md-12 text-center">
                            <div class="g-recaptcha" data-sitekey="6LcVk_EqAAAAAByWVK3Kks4Ig5af7n-p4-UNI8uG"></div>
                        </div>
                    </div>
                    
                    <!-- Submit button -->
                    <div class="row">
                        <div class="col-lg-12 text-center" style="margin-top: 20px;">
                            <button type="submit" id="submitButton" class="btn btn-xl">Отправить RSVP</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- CSS for RSVP form -->
<style>
    .attendee-form {
        background-color: #f9f9f9;
        border-radius: 5px;
        padding: 15px;
        margin-bottom: 20px;
    }
    
    .checkbox-group {
        margin-top: 10px;
        padding: 15px;
        background-color: white;
        border-radius: 4px;
        border: 1px solid #ddd;
    }
    
    .checkbox-inline {
        margin-right: 15px;
        margin-bottom: 10px;
    }
    
    hr {
        margin: 15px 0;
        border-top: 1px solid #ddd;
    }
    
    .g-recaptcha {
        display: inline-block;
        margin: 20px 0;
    }
</style>

<!-- Google reCAPTCHA Script -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>